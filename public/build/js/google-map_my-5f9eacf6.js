function initialize(){var e=new google.maps.LatLng(23.973875,120.982024),o={zoom:8,center:e};map=new google.maps.Map(document.getElementById("map-canvas"),o),marker=new google.maps.Marker({draggable:!0,position:e});var t=document.getElementById("pac-input"),a=new google.maps.places.Autocomplete(t);a.bindTo("bounds",map);var n=new google.maps.InfoWindow;geocoder=new google.maps.Geocoder,marker.setVisible(!1),marker.setMap(map),google.maps.event.addListener(marker,"drag",function(e){setInput(e.latLng.lat(),e.latLng.lng())}),google.maps.event.addListener(marker,"dragend",function(e){setInput(e.latLng.lat(),e.latLng.lng())}),$("#lat").val()&&$("#lng").val()&&(e=new google.maps.LatLng($("#lat").val(),$("#lng").val()),map.setCenter(e),map.setZoom(17),marker.setPosition(e),marker.setVisible(!0)),google.maps.event.addListener(a,"place_changed",function(){n.close(),marker.setVisible(!1);var e=a.getPlace();if(e.geometry){e.geometry.viewport?map.fitBounds(e.geometry.viewport):map.setCenter(e.geometry.location),marker.setIcon({url:e.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(35,35)}),setInput(e.geometry.location.lat(),e.geometry.location.lng()),map.setZoom(17),marker.setPosition(e.geometry.location),marker.setVisible(!0);var o="";e.address_components&&(o=[e.address_components[0]&&e.address_components[0].short_name||"",e.address_components[1]&&e.address_components[1].short_name||"",e.address_components[2]&&e.address_components[2].short_name||""].join(" ")),n.setContent("<div><strong>"+e.name+"</strong><br>"+o),n.open(map,marker)}})}function setInput(e,o){$("#lat").val(e),$("#lng").val(o)}function loadScript(){var e=document.createElement("script");e.type="text/javascript",e.src="http://maps.googleapis.com/maps/api/js?sensor=true&libraries=places&callback=initialize",document.body.appendChild(e)}var geocoder,map,marker;$(function(){$("#refresh-map").click(function(){var e=$("#pac-input").val();return e?void geocoder.geocode({address:e},function(e,o){o==google.maps.GeocoderStatus.OK&&(map.setCenter(e[0].geometry.location),map.setZoom(17),marker.setPosition(e[0].geometry.location),marker.setVisible(!0),setInput(e[0].geometry.location.lat(),e[0].geometry.location.lng()))}):!1})}),window.onload=loadScript;